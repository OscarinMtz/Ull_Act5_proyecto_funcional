{% extends 'base.html' %}

{% block content %}
<div class="row">
    <div class="col-12">
        <!-- Hero Section -->
        <div class="card card-custom shadow-lg mb-5">
            <div class="card-body text-center py-5">
                <h1 class="display-4 fw-bold">Bienvenido al Sistema SPA</h1>
                <p class="lead fs-4">Sistema completo de administraci√≥n para centro de bienestar y spa</p>
                
                <div class="mt-4">
                    <img src="https://images.unsplash.com/photo-1544161515-4ab6ce6db874?ixlib=rb-4.0.3&auto=format&fit=crop&w=1170&q=80" 
                         alt="SPA Center" 
                         class="img-fluid rounded shadow" 
                         style="max-height: 400px;">
                </div>
            </div>
        </div>

        <!-- Estad√≠sticas -->
        <div class="row mb-5">
            <div class="col-md-4 mb-3">
                <div class="card bg-primary text-white text-center shadow stats-card">
                    <div class="card-body py-4">
                        <div class="display-4 fw-bold">{{ empleados_count }}</div>
                        <h5 class="mb-0">üë• Empleados</h5>
                        <small>Personal activo en el sistema</small>
                    </div>
                </div>
            </div>
            <div class="col-md-4 mb-3">
                <div class="card bg-success text-white text-center shadow stats-card">
                    <div class="card-body py-4">
                        <div class="display-4 fw-bold">{{ clientes_count }}</div>
                        <h5 class="mb-0">üë®‚Äçüíº Clientes</h5>
                        <small>Clientes en nuestra base</small>
                    </div>
                </div>
            </div>
            <div class="col-md-4 mb-3">
                <div class="card bg-info text-white text-center shadow stats-card">
                    <div class="card-body py-4">
                        <div class="display-4 fw-bold">{{ servicios_count }}</div>
                        <h5 class="mb-0">üì¶ Servicios</h5>
                        <small>Servicios en cat√°logo</small>
                    </div>
                </div>
            </div>
        </div>

        <!-- M√≥dulos del Sistema -->
        <div class="row">
            <div class="col-md-4 mb-4">
                <div class="card bg-light h-100 card-hover shadow">
                    <div class="card-body text-center">
                        <h4 class="text-primary">üë• Empleados</h4>
                        <p>Gesti√≥n completa del personal del spa</p>
                        <div class="mt-3">
                            <a href="{% url 'agregar_empleado' %}" class="btn btn-primary btn-sm me-2">‚ûï Agregar</a>
                            <a href="{% url 'ver_empleados' %}" class="btn btn-outline-primary btn-sm">üìã Ver Todos</a>
                        </div>
                    </div>
                </div>
            </div>
            
            <div class="col-md-4 mb-4">
                <div class="card bg-light h-100 card-hover shadow">
                    <div class="card-body text-center">
                        <h4 class="text-success">üë®‚Äçüíº Clientes</h4>
                        <p>Administraci√≥n completa de clientes</p>
                        <div class="mt-3">
                            <a href="{% url 'agregar_cliente' %}" class="btn btn-success btn-sm me-2">‚ûï Agregar</a>
                            <a href="{% url 'ver_clientes' %}" class="btn btn-outline-success btn-sm">üìã Ver Todos</a>
                        </div>
                    </div>
                </div>
            </div>
            
            <div class="col-md-4 mb-4">
                <div class="card bg-light h-100 card-hover shadow">
                    <div class="card-body text-center">
                        <h4 class="text-info">üì¶ Servicios</h4>
                        <p>Cat√°logo completo de servicios con im√°genes</p>
                        <div class="mt-3">
                            <a href="{% url 'agregar_servicio' %}" class="btn btn-info btn-sm me-2">‚ûï Agregar</a>
                            <a href="{% url 'ver_servicios' %}" class="btn btn-outline-info btn-sm">üìã Ver Todos</a>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Relaciones entre M√≥dulos -->
        <div class="row mt-5">
            <div class="col-12">
                <div class="card shadow">
                    <div class="card-header bg-info text-white">
                        <h4 class="mb-0">üîó Relaciones del Sistema</h4>
                    </div>
                    <div class="card-body">
                        <div class="row">
                            <!-- Servicios con Empleados -->
                            <div class="col-md-6 mb-4">
                                <h5>üì¶ Servicios con Empleados Asignados</h5>
                                {% for servicio in todos_servicios %}
                                {% if servicio.empleados.all %}
                                <div class="card mb-2">
                                    <div class="card-body py-2">
                                        <h6 class="mb-1">{{ servicio.nombre }}</h6>
                                        <div class="d-flex flex-wrap gap-1">
                                            {% for empleado in servicio.empleados.all %}
                                                <span class="badge bg-primary">{{ empleado.nombre }}</span>
                                            {% endfor %}
                                        </div>
                                    </div>
                                </div>
                                {% endif %}
                                {% endfor %}
                            </div>
                            
                            <!-- Empleados por Servicio -->
                            <div class="col-md-6 mb-4">
                                <h5>üë• Empleados por Especialidad</h5>
                                {% for servicio in todos_servicios %}
                                {% if servicio.empleados.all %}
                                <div class="card mb-2">
                                    <div class="card-body py-2">
                                        <h6 class="mb-1">{{ servicio.nombre }}</h6>
                                        <small class="text-muted">{{ servicio.empleados.count }} empleado(s)</small>
                                    </div>
                                </div>
                                {% endif %}
                                {% endfor %}
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Acciones R√°pidas -->
        <div class="row mt-4">
            <div class="col-12">
                <div class="card shadow">
                    <div class="card-header bg-dark text-white">
                        <h5 class="mb-0">‚ö° Acciones R√°pidas</h5>
                    </div>
                    <div class="card-body">
                        <div class="row text-center">
                            <div class="col-md-3 mb-2">
                                <a href="{% url 'agregar_servicio' %}" class="btn btn-info btn-lg w-100">
                                    üì¶<br>Nuevo Servicio
                                </a>
                            </div>
                            <div class="col-md-3 mb-2">
                                <a href="{% url 'agregar_empleado' %}" class="btn btn-primary btn-lg w-100">
                                    üë•<br>Nuevo Empleado
                                </a>
                            </div>
                            <div class="col-md-3 mb-2">
                                <a href="{% url 'agregar_cliente' %}" class="btn btn-success btn-lg w-100">
                                    üë®‚Äçüíº<br>Nuevo Cliente
                                </a>
                            </div>
                            <div class="col-md-3 mb-2">
                                <a href="/admin/" class="btn btn-warning btn-lg w-100">
                                    ‚öôÔ∏è<br>Administrar
                                </a>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
{% endblock %}